{"version":3,"file":"src_app_A6_online-proposition_A6_online-proposition_module_ts.js","mappings":"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","sources":["./src/app/A6_online-proposition/A6_online-proposition-routing.module.ts","./src/app/A6_online-proposition/A6_online-proposition.module.ts","./src/app/A6_online-proposition/A6_online-proposition.page.ts","./src/app/A6_online-proposition/A6_online-proposition.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { A6_OnlinePropositionPage } from './A6_online-proposition.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: A6_OnlinePropositionPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OnlinePropositionPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OnlinePropositionPageRoutingModule } from './A6_online-proposition-routing.module';\r\n\r\nimport { A6_OnlinePropositionPage } from './A6_online-proposition.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OnlinePropositionPageRoutingModule\r\n  ],\r\n  declarations: [A6_OnlinePropositionPage]\r\n})\r\nexport class OnlinePropositionPageModule {}\r\n","import { Component, OnInit, QueryList, ViewChildren } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { IonChip} from '@ionic/angular';\r\nimport { Joueur } from '../classes/joueur';\r\nimport { Resultat } from '../classes/resultat';\r\nimport { PartieService } from '../services/partie.service';\r\n\r\n@Component({\r\n  selector: 'app-online-proposition',\r\n  templateUrl: './A6_online-proposition.page.html',\r\n  styleUrls: ['./A6_online-proposition.page.scss'],\r\n})\r\nexport class A6_OnlinePropositionPage implements OnInit {\r\n    \r\n    @ViewChildren(IonChip) chips:QueryList<IonChip>;\r\n\r\n    mot:string;\r\n    definitions:Array<Resultat>=[];\r\n    joueurs:Array<Joueur>=[];\r\n    votes:number;\r\n    partieEnCours:number;\r\n\r\n  constructor(public service:PartieService, private router : Router) {\r\n    this.partieEnCours = this.service.partieEnCours;\r\n  }\r\n  \r\n  ngOnInit() {\r\n  }\r\n  \r\n  ionViewWillEnter(){\r\n    //Retrieves total number of votes from total number of ion-chip elements\r\n    this.votes = this.chips.length;\r\n    \r\n    // Retrieve from DB : current word, list of turns, list of players\r\n    this.service.getPartie(this.partieEnCours).subscribe(u => {\r\n      this.joueurs = u.joueur;\r\n      this.service.getTour(u.manche[this.service.mancheEnCours]._ID).subscribe(tableauTours=>{\r\n        this.mot = tableauTours[this.service.tourEnCours].mot_choisi;\r\n        let idTour = tableauTours[this.service.tourEnCours]._ID; \r\n        //waiting for all the players voted\r\n        this.waitingForVote(this.service,this.router,idTour);\r\n      });\r\n    });\r\n  }\r\n\r\n  //waiting for all the votes : when all players have voted -> we can go to \"reponse\" page\r\n  waitingForVote(service:PartieService,router:Router,idTour:number){\r\n    setTimeout(()=>{\r\n      // retreive array of resultat to display\r\n      this.service.getAllResultat(idTour).subscribe(tableauResultat => {\r\n        this.definitions = tableauResultat;\r\n        this.votes = this.chips.length;\r\n        if (this.votes == this.joueurs.length){\r\n          router.navigate(['reponse'], {queryParams:{status:'online'}})\r\n        }else{\r\n          this.waitingForVote(service,router,idTour);\r\n        }\r\n      })\r\n    },1000);\r\n  }\r\n}\r\n","export default \"<ion-content>\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <h1>PROPOSITIONS</h1>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <!-- word-->\\r\\n        <h2>{{mot}}</h2>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <p>Appuie sur les définitions pour les lire et vote pour celle qui te paraît être la bonne !</p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <!-- for every entry in current Tour's resultats, we create a line so we can read definition and vote -->\\r\\n    <ion-row *ngFor=\\\"let def of definitions; let index = index\\\" routerLink=\\\"/online-vote\\\" [queryParams]=\\\"{ indexDefinition : [index]}\\\">\\r\\n      <ion-col>\\r\\n        <h4>Définition n°{{index+1}}</h4>\\r\\n      </ion-col>\\r\\n      <ion-col>\\r\\n        <!-- display the chip of the player who vote for this definition-->\\r\\n        <ion-chip *ngFor=\\\"let vote of def.id_vote;let z = index;\\\" [attr.data-index]=\\\"z\\\">\\r\\n          <ion-avatar>\\r\\n            <img src=\\\"../../assets/avatarexemple.jpg\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <!-- reteive the name of the player-->\\r\\n            {{this.service.findPlayerName(vote,joueurs)}}\\r\\n          </ion-label>\\r\\n        </ion-chip>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <!-- number of players already voted / number total of players-->\\r\\n        <p>Votes en cours : {{votes}}/{{joueurs.length}}</p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <!-- Display progress bar with current completed votes -->\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <ion-progress-bar [value]=\\\"votes/joueurs.length\\\" color=\\\"light\\\"></ion-progress-bar>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}