{"version":3,"file":"src_app_winner-resultat_winner-resultat_module_ts.js","mappings":"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","sources":["./src/app/winner-resultat/winner-resultat-routing.module.ts","./src/app/winner-resultat/winner-resultat.module.ts","./src/app/winner-resultat/winner-resultat.page.ts","./src/app/winner-resultat/winner-resultat.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { WinnerResultatPage } from './winner-resultat.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WinnerResultatPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WinnerResultatPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { WinnerResultatPageRoutingModule } from './winner-resultat-routing.module';\n\nimport { WinnerResultatPage } from './winner-resultat.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    WinnerResultatPageRoutingModule\n  ],\n  declarations: [WinnerResultatPage]\n})\nexport class WinnerResultatPageModule {}\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Joueur } from '../classes/joueur';\r\nimport { OfflineService } from '../services/offline.service';\r\nimport { PartieService } from '../services/partie.service';\r\n\r\n@Component({\r\n  selector: 'app-winner-resultat',\r\n  templateUrl: './winner-resultat.page.html',\r\n  styleUrls: ['./winner-resultat.page.scss'],\r\n})\r\nexport class WinnerResultatPage implements OnInit {\r\n\r\n  joueurs:Array<Joueur>=[];\r\n  winner:string;\r\n  status:string;\r\n  partieEnCours : number;\r\n\r\n  constructor(private service:OfflineService, private modalController:ModalController, private currentRoute:ActivatedRoute, private onlineService:PartieService) {\r\n  this.partieEnCours = this.onlineService.partieEnCours;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    //Get status from route param : online or offline\r\n    this.currentRoute.queryParams.subscribe(param => {\r\n      this.status = param[\"status\"];\r\n      if (this.status == \"online\"){//if online mode\r\n        this.onlineService.getScores(this.partieEnCours).subscribe(partie =>{\r\n          this.joueurs = partie.joueur;\r\n\r\n          // Sort player array to find winner\r\n          this.joueurs.sort((a,b)=>{\r\n            return b.score_joueur - a.score_joueur;\r\n          });\r\n          this.winner = this.joueurs[0].nom_joueur;\r\n          \r\n          // Reset all values\r\n          this.onlineService.mancheEnCours = 0;\r\n          this.onlineService.tourEnCours = 0;\r\n        })\r\n\r\n      } else { //if offline mode\r\n      this.joueurs = this.service.joueurs;\r\n      for(let i=0;i<this.joueurs.length;i++){\r\n        for (let p=0;p<this.service.manches.length;p++){\r\n          for (let x=0;x<this.service.manches[p].tours.length;x++){\r\n            // If the current player is not the game master\r\n            if (this.joueurs[i].id_joueur !== this.service.manches[p].tours[x].id_mj){\r\n              for (let y=0;y<this.service.manches[p].tours[x].resultat.length;y++){\r\n                for (let z=0;z<this.service.manches[p].tours[x].resultat[y].id_vote.length;z++){\r\n                  //If he votes for the good definition\r\n                  if(this.service.manches[p].tours[x].id_mj == this.service.manches[p].tours[x].resultat[y].id_joueur && this.joueurs[i].id_joueur == this.service.manches[p].tours[x].resultat[y].id_vote[z]){\r\n                    console.log(\"point bonne définition accordé à : \"+this.joueurs[i].nom_joueur)\r\n                    this.joueurs[i].score_joueur++; //1 point for the current player\r\n                  // If the current player votes for another defintion....\r\n                } else if (this.joueurs[i].id_joueur == this.service.manches[p].tours[x].resultat[y].id_vote[z] && this.joueurs[i].id_joueur !== this.service.manches[p].tours[x].resultat[y].id_joueur){\r\n                  console.log(\"point vote accordé à : \"+this.joueurs[this.service.manches[p].tours[x].resultat[y].id_joueur].nom_joueur+\", tour : \"+x+\", resultat : \"+y);\r\n                    this.joueurs[this.service.manches[p].tours[x].resultat[y].id_joueur].score_joueur++;//1 point for the definition's player\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // Reset all values\r\n      this.service.mancheEnCours=0;\r\n      this.service.toursEnCours=0;\r\n      \r\n      // Sort player array to find winner\r\n      this.joueurs.sort((a,b)=>{\r\n        return b.score_joueur - a.score_joueur;\r\n      });\r\n      this.winner = this.joueurs[0].nom_joueur;\r\n    }\r\n\r\n\r\n\r\n  });\r\n  }\r\n\r\n  dismiss(){\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n}\r\n","export default \"<ion-content>\\r\\n\\t<ion-grid>\\r\\n\\t\\t<ion-row>\\r\\n\\t\\t\\t<ion-col class=\\\"ion-text-center\\\">\\r\\n\\t\\t\\t\\t<h1>RESULTATS</h1>\\r\\n\\t\\t\\t</ion-col>\\r\\n\\t\\t</ion-row>\\r\\n\\t\\t<ion-row *ngFor=\\\"let joueur of joueurs;let index = index\\\" class=\\\"ion-text-center\\\">\\r\\n\\t\\t\\t<ion-col>\\r\\n\\t\\t\\t\\t<h4>{{joueur.nom_joueur}}</h4>\\r\\n\\t\\t\\t</ion-col>\\r\\n\\t\\t\\t<ion-col>\\r\\n\\t\\t\\t\\t<h5>{{joueur.score_joueur}} POINTS</h5>\\r\\n\\t\\t\\t</ion-col>\\r\\n\\t\\t</ion-row>\\r\\n\\t\\t<ion-row>\\r\\n\\t\\t\\t<ion-col class=\\\"ion-text-center\\\">\\r\\n\\t\\t\\t\\t<ion-button color=\\\"danger\\\" size=\\\"large\\\" routerLink=\\\"/\\\">REJOUER</ion-button>\\r\\n\\t\\t\\t</ion-col>\\r\\n\\t\\t</ion-row>\\r\\n\\t</ion-grid>\\r\\n\\r\\n\\t<!-- Modal displayed by default, announcing the winner name -->\\r\\n\\t<ion-modal\\r\\n\\t[swipeToClose]=\\\"true\\\"\\r\\n\\t[isOpen]=\\\"true\\\"\\r\\n\\t(click)=\\\"dismiss()\\\"\\r\\n\\t>\\r\\n\\t\\t<ng-template>\\r\\n\\t\\t\\t<div class=\\\"ion-align-items-start\\\">\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t<h1 class=\\\"ion-text-center\\\">LE GRAND GAGNANT EST</h1>\\r\\n\\t\\t\\t\\t<p class=\\\"ion-text-center\\\">{{winner}}</p>\\r\\n\\t\\t\\t\\t<div class=\\\"ion-text-center\\\" id=\\\"image\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</ng-template>\\r\\n\\t</ion-modal>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}